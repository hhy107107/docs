# Groovy构建脚本入门
理想情况下，一个Groovy脚本大多看起来像配置：设置项目的一些属性，配置依赖，声明任务等。这些配置基于Groovy语言结构。本入门指南目的是解释这些结构，更重要的是描述它们与Gradle api 文档的关系。

## Project对象
Groovy是一个基于Java的面向对象语言，属性和方法适用于对象。在某些情况下，对象是隐式的，尤其是在脚本的顶部，它未嵌套在`{}`内。

考虑这个脚本片段，包含一个不合格的属性和快：
```
version = '1.0.0.GA'

configurations {
    ...
}
```
`version`和`configurations`都是`org.gradle.api.Project`的一部分。

这个例子反应了如何在Groovy脚本中使用隐式声明替代`Project`。如果你看见一个不合格的元素并且你不知道它在那里定义的，通常检查`Project`API文档，看看是否来自`Project`。

> 避免在你的构建脚本中使用`Groovy MetaClass`技术。Gradle 提供了自己的API来添加`动态运行时属性`
> 使用Groovy特定的`metaprogramming`可能导致构建与构建之间过程保持大量的内存，最终引起gradle进程内存不足。

## 属性
```
<obj>.<name>                // 获取一个属性值
<obj>.<name> = <value>      // 设置一个属性值
"$<name>"                   // 在字符串中嵌套属性值
"${<obj>.<name>}"           // 同上，在字符串中嵌入属性
```
**例子**

```
version = '1.0.1'
myCopyTask.description = 'Copies some files'

file("$buildDir/classes")
println "Destination: ${myCopyTask.destinationDir}"
```

属性代表对象的某种状态。如果存在`=`符号表示为属性赋值。一个合格的名称可用以`<obj>.`开头，也可以没有其他任何的装饰。

如果名称不合格，它可能是以下之一：
- 一个任务实例的名字
- 一个`Project`的属性
- 在项目其他地方定义的额外的属性
- 快内隐式对象的属性
- 之前在构建脚本中定义的局部变量

注意，插件可以添加自己属性到`Project`对象中。API documentation 列了所有核心插件添加的属性。如果你很难找到属性的来源，请查看构建使用插件的文档。

> 在构建脚本中引用由非核心插件添加的项目属性时，请考虑以`project`为前缀。清楚的表明该属性属于项目对象。

**API文档中的属性**
Groovy DSL reference 显示了在构建脚本中使用的属性，但Javadocs仅显示方法。这是因为属性的背后是利用方法来实现的。
- 如果有一个名为 get<PropertyName> 的方法具有零参数并返回与属性相同的类型，则可以读取该属性。
- 如果有一个名为 set<PropertyName> 的方法具有一个与属性具有相同类型且返回类型为 void 的参数，则可以修改属性。

请注意，属性名称通常以小写字母开头，但该字母在方法名称中是大写的。 所以 getter 方法 getProjectVersion() 对应属性 projectVersion。 当名称以至少两个大写字母开头时，此约定不适用，在这种情况下，大小写不变。 例如，getRAM() 对应于属性 RAM。

**例子**
```
project.getVersion()
project.version

project.setVersion('1.0.1')
project.version = '1.0.1'
```

## 方法
```
<obj>.<name>()              // 调用无参方法
<obj>.<name>(<arg>, <arg>)  // 调用多个参数的方法
<obj>.<name> <arg>, <arg>   // 调用多个参数的方法 (没有圆括号)
```
**例子**
```
myCopyTask.include '**/*.xml', '**/*.properties'

ext.resourceSpec = copySpec()   // `copySpec()` comes from `Project`

file('src/main/java')
println 'Hello, World!'
```

方法表现对象的一些行为，尽管Gradle经常使用方法来配置对象的状态。方法可以通过它们的参数或空括号来识别。 请注意，有时需要括号，例如当方法的参数为零时，因此您可能会发现始终使用括号最简单。
